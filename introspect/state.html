<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1">

<title>JSON-RPC State</title>

<link rel=stylesheet type=text/css href="http://yui.yahooapis.com/3.5.1/build/cssreset/cssreset-min.css">
<link rel=stylesheet type=text/css href="http://yui.yahooapis.com/3.5.1/build/cssbase/cssbase-min.css">
<link rel=stylesheet href=style.css>
<style>
.title, .title + div {
	display:inline-block;
}
#output .title {
	margin-top:0.5em;
}
[data-type="boolean"][data-value="true"] {
	color:green;
}
[data-type="boolean"][data-value="false"] {
	color:red;
}
[data-type="number"] {
	font-style:italic;
}
[data-type="string"]:before, [data-type="string"]:after {
	content: '"';
}
</style>
<body>
<div id=header></div>
<div id=menu></div>
<div id=output></div>
<div style="clear:both;"></div>

<script>window.DEBUG = true</script>
<script src=jquery.js></script>
<script src=Q.js></script>
<script src=parseURL.js></script>
<script src=jsonrpc.js></script>
<script>
(function (window, $, undefined) {
	"use strict";
	
	var state = {
		'GUI': {},
		'Player': {},
		'JSONRPC': {},
		'Application': {}
	},
	renderTree = function (d) {
		var $out = $('<ul></ul>');
		if (d instanceof Array || d instanceof Object) {
			$.each(d, function (itemName, item) {
				$('<li></li>').
				  attr('data-title',itemName).
				  append('<div class="title">'+itemName+'</div>').
				  append(renderTree(item)).
				  appendTo($out);
			});
		}
		else {
			$out = $('<div></div>').
			  attr('data-type', typeof d).
			  attr('data-value', d).
			  text(d);
		}
		if (d instanceof Array) $out.addClass('array');
		return $out;
	},
	renderState = function () {
		$('#output').
		  html('').
		  append( renderTree( state ) );
	},
	infoLabels = {
		'Weather': {
			'Location': { 'infoLabel': 'Weather.Location' },
			'Conditions': { 'infoLabel': 'Weather.Conditions' },
			'Temperature': { 'infoLabel': 'Weather.Temperature' },
			'FeelsLike': { 'infoLabel': 'Window(Weather).Property(Current.FeelsLike)' },
			'UVIndex': { 'infoLabel': 'Window(Weather).Property(Current.UVIndex)' },
			'WindSpeed': { 'infoLabel': 'Window(Weather).Property(Current.WindSpeed)' },
			'WindDirection': { 'infoLabel': 'Window(Weather).Property(Current.WindDirection)' },
			'DewPoint': { 'infoLabel': 'Window(Weather).Property(Current.DewPoint)' },
			'Humidity': { 'infoLabel': 'Window(Weather).Property(Current.Humidity)' }
		},
		/*'AudioScrobbler': {
			'ConnectState':{	'infoLabel': 'AudioScrobbler.ConnectState',	'description': 'Connected to the audioscrobbler'	},
			'SubmitInterval':{	'infoLabel': 'AudioScrobbler.SubmitInterval',	'description': 'Shows next reconnect when submission failed'	},
			'FilesCached':{	'infoLabel': 'AudioScrobbler.FilesCached',	'description': 'Number of cached songs'	},
			'SubmitState':{	'infoLabel': 'AudioScrobbler.SubmitState',	'description': 'Shows time left until the current song is submitted'	}
		},
		'Container': {
			'FolderPath':{	'infoLabel': 'Container.FolderPath',	'description': 'Shows complete path of currently displayed folder'	},
			'FolderName':{	'infoLabel': 'Container.FolderName',	'description': 'Shows top most folder in currently displayed folder'	},
			'Viewmode':{	'infoLabel': 'Container.Viewmode',	'description': 'Returns the current viewmode (list, icons etc.)'	},
			'SortMethod':{	'infoLabel': 'Container.SortMethod',	'description': 'Returns the current sort method (name, year, rating, etc.)'	},
			'PluginName':{	'infoLabel': 'Container.PluginName',	'description': 'Returns the current plugins base folder name'	},
			'PluginCategory':{	'infoLabel': 'Container.PluginCategory',	'description': 'Returns the current plugins category (set by the scripter)'	},
			'ShowPlot':{	'infoLabel': 'Container.ShowPlot',	'description': 'Returns the TV Show Plot of the current container and can be used at season and episode level'	}
		},
		'Fanart': {
			'Color1':{	'infoLabel': 'Fanart.Color1',	'description': 'Returns the first of three colors included in the currently selected Fanart theme for the parent TV Show. Colors are arranged Lightest to Darkest.'	},
			'Color2':{	'infoLabel': 'Fanart.Color2',	'description': 'Returns the second of three colors included in the currently selected Fanart theme for the parent TV Show. Colors are arranged Lightest to Darkest.'	},
			'Color3':{	'infoLabel': 'Fanart.Color3',	'description': 'Returns the third of three colors included in the currently selected Fanart theme for the parent TV Show. Colors are arranged Lightest to Darkest.'	}
		},
		'ListItem': {
			'Label':{	'infoLabel': 'Listitem.Label',	'description': 'Shows the left label of the currently selected item in a list or thumb control'	},
			'Label2':{	'infoLabel': 'ListItem.Label2',	'description': 'Shows the right label of the currently selected item in a list or thumb control'	},
			'Title':{	'infoLabel': 'ListItem.Title',	'description': 'Shows the title of the currently selected song or movie in a list or thumb control'	},
			'OriginalTitle':{	'infoLabel': 'ListItem.OriginalTitle',	'description': 'Shows the original title of the currently selected movie in a list or thumb control'	},
			'SortLetter':{	'infoLabel': 'ListItem.SortLetter',	'description': 'Shows the first letter of the current file in a list or thumb control'	},
			'TrackNumber':{	'infoLabel': 'ListItem.TrackNumber',	'description': 'Shows the track number of the currently selected song in a list or thumb control'	},
			'Artist':{	'infoLabel': 'ListItem.Artist',	'description': 'Shows the artist of the currently selected song in a list or thumb control'	},
			'Property(Artist_Born)':{	'infoLabel': 'ListItem.Property(Artist_Born)',	'description': 'Date of Birth of the currently selected Artist'	},
			'Property(Artist_Died)':{	'infoLabel': 'ListItem.Property(Artist_Died)',	'description': 'Date of Death of the currently selected Artist'	},
			'Property(Artist_Formed)':{	'infoLabel': 'ListItem.Property(Artist_Formed)',	'description': 'Formation date of the currently selected Band'	},
			'Property(Artist_Disbanded)':{	'infoLabel': 'ListItem.Property(Artist_Disbanded)',	'description': 'Disbanding date of the currently selected Band'	},
			'Property(Artist_YearsActive)':{	'infoLabel': 'ListItem.Property(Artist_YearsActive)',	'description': 'Years the currently selected artist has been active'	},
			'Property(Artist_Instrument)':{	'infoLabel': 'ListItem.Property(Artist_Instrument)',	'description': 'Instruments played by the currently selected artist'	},
			'Property(Artist_Description)':{	'infoLabel': 'ListItem.Property(Artist_Description)',	'description': 'Shows a biography of the currently selected artist'	},
			'Property(Artist_Mood)':{	'infoLabel': 'ListItem.Property(Artist_Mood)',	'description': 'Shows the moods of the currently selected artist'	},
			'Property(Artist_Style)':{	'infoLabel': 'ListItem.Property(Artist_Style)',	'description': 'Shows the styles of the currently selected artist'	},
			'Property(Artist_Genre)':{	'infoLabel': 'ListItem.Property(Artist_Genre)',	'description': 'Shows the genre of the currently selected artist'	},
			'Album':{	'infoLabel': 'ListItem.Album',	'description': 'Shows the album of the currently selected song in a list or thumb control'	},
			'Property(Album_Mood)':{	'infoLabel': 'ListItem.Property(Album_Mood)',	'description': 'Shows the moods of the currently selected Album'	},
			'Property(Album_Style)':{	'infoLabel': 'ListItem.Property(Album_Style)',	'description': 'Shows the styles of the currently selected Album'	},
			'Property(Album_Theme)':{	'infoLabel': 'ListItem.Property(Album_Theme)',	'description': 'Shows the themes of the currently selected Album'	},
			'Property(Album_Type)':{	'infoLabel': 'ListItem.Property(Album_Type)',	'description': 'Shows the Album Type (e.g. compilation, enhanced, explicit lyrics) of the currently selected Album'	},
			'Property(Album_Label)':{	'infoLabel': 'ListItem.Property(Album_Label)',	'description': 'Shows the record label of the currently selected Album'	},
			'Property(Album_Description)':{	'infoLabel': 'ListItem.Property(Album_Description)',	'description': 'Shows a review of the currently selected Album'	},
			'DiscNumber':{	'infoLabel': 'ListItem.DiscNumber',	'description': 'Shows the disc number of the currently selected song in a list or thumb control'	},
			'Year':{	'infoLabel': 'ListItem.Year',	'description': 'Shows the year of the currently selected song, album or movie in a list or thumb control'	},
			'Premiered':{	'infoLabel': 'ListItem.Premiered',	'description': 'Shows the release/aired date of the currently selected episode, show or movie in a list or thumb control'	},
			'Genre':{	'infoLabel': 'ListItem.Genre',	'description': 'Shows the genre of the currently selected song, album or movie in a list or thumb control'	},
			'Director':{	'infoLabel': 'ListItem.Director',	'description': 'Shows the director of the currently selected movie in a list or thumb control'	},
			'Country':{	'infoLabel': 'ListItem.Country',	'description': 'Shows the production country of the currently selected movie in a list or thumb control'	},
			'Episode':{	'infoLabel': 'ListItem.Episode',	'description': 'Shows the episode number value for the currently selected episode. It also shows the number of total, watched or unwatched episodes for the currently selected tvshow or season, based on the the current watched filter.'	},
			'Season':{	'infoLabel': 'ListItem.Season',	'description': 'Shows the season value for the currently selected tvshow'	},
			'TVShowTitle':{	'infoLabel': 'ListItem.TVShowTitle',	'description': 'Shows the name value for the currently selected tvshow in the season and episode depth of the video library'	},
			'Property(TotalSeasons)':{	'infoLabel': 'ListItem.Property(TotalSeasons)',	'description': 'Shows the total number of seasons for the currently selected tvshow'	},
			'Property(TotalEpisodes)':{	'infoLabel': 'ListItem.Property(TotalEpisodes)',	'description': 'Shows the total number of episodes for the currently selected tvshow or season'	},
			'Property(WatchedEpisodes)':{	'infoLabel': 'ListItem.Property(WatchedEpisodes)',	'description': 'Shows the number of watched episodes for the currently selected tvshow or season'	},
			'Property(UnWatchedEpisodes)':{	'infoLabel': 'ListItem.Property(UnWatchedEpisodes)',	'description': 'Shows the number of unwatched episodes for the currently selected tvshow or season'	},
			'Property(NumEpisodes)':{	'infoLabel': 'ListItem.Property(NumEpisodes)',	'description': 'Shows the number of total, watched or unwatched episodes for the currently selected tvshow or season, based on the the current watched filter.'	},
			'PictureResolution':{	'infoLabel': 'ListItem.PictureResolution',	'description': 'Shows the dimensions of the selected picture'	},
			'PictureComment':{	'infoLabel': 'ListItem.PictureComment',	'description': 'Shows the EXIF comment of the selected picture'	},
			'PictureCaption':{	'infoLabel': 'ListItem.PictureCaption',	'description': 'Shows the IPTC caption of the selected picture'	},
			'PictureDesc':{	'infoLabel': 'ListItem.PictureDesc',	'description': 'Shows the description of the selected picture'	},
			'PictureKeywords':{	'infoLabel': 'ListItem.PictureKeywords',	'description': 'Shows the IPTC keywords of the selected picture'	},
			'PictureCamMake':{	'infoLabel': 'ListItem.PictureCamMake',	'description': 'Shows the camera make used to take the selected picture'	},
			'PictureCamModel':{	'infoLabel': 'ListItem.PictureCamModel',	'description': 'Shows the camera model used to take the selected picture'	},
			'PictureAperture':{	'infoLabel': 'ListItem.PictureAperture',	'description': 'Shows the lens aperture of the selected picture'	},
			'PictureFocalLen':{	'infoLabel': 'ListItem.PictureFocalLen',	'description': 'Shows the lens focal length of the selected picture'	},
			'PictureFocusDist':{	'infoLabel': 'ListItem.PictureFocusDist',	'description': 'Shows the lens focus distance of the selected picture'	},
			'PictureExpMode':{	'infoLabel': 'ListItem.PictureExpMode',	'description': 'Shows the exposure mode of the selected picture'	},
			'PictureExpTime':{	'infoLabel': 'ListItem.PictureExpTime',	'description': 'Shows the exposure time of the selected picture'	},
			'PictureIso':{	'infoLabel': 'ListItem.PictureIso',	'description': 'Shows the ISO setting of the selected picture'	},
			'PictureGpsLat':{	'infoLabel': 'ListItem.PictureGpsLat',	'description': 'Shows the GPS latitude of the selected picture'	},
			'PictureGpsLon':{	'infoLabel': 'ListItem.PictureGpsLon',	'description': 'Shows the GPS longitude of the selected picture'	},
			'PictureGpsAlt':{	'infoLabel': 'ListItem.PictureGpsAlt',	'description': 'Shows the GPS altitude of the selected picture'	},
			'PictureDateTime':{	'infoLabel': 'ListItem.PictureDateTime',	'description': 'Shows the date/timestamp of the selected picture'	},
			'PicturePath':{	'infoLabel': 'ListItem.PicturePath',	'description': 'Shows the filename and path of the selected picture'	},
			'FileName':{	'infoLabel': 'ListItem.FileName',	'description': 'Shows the filename of the currently selected song or movie in a list or thumb control'	},
			'Path':{	'infoLabel': 'ListItem.Path',	'description': 'Shows the complete path of the currently selected song or movie in a list or thumb control'	},
			'FolderName':{	'infoLabel': 'ListItem.FolderName',	'description': 'Shows top most folder of the path of the currently selected song or movie in a list or thumb control'	},
			'FileNameAndPath':{	'infoLabel': 'ListItem.FileNameAndPath',	'description': 'Shows the full path with filename of the currently selected song or movie in a list or thumb control'	},
			'FileExtension':{	'infoLabel': 'ListItem.FileExtension',	'description': 'Shows the file extension (without leading dot) of the currently selected item in a list or thumb control'	},
			'DateAdded':{	'infoLabel': 'ListItem.DateAdded',	'description': 'Shows the date the currently selected item was added to the library'	},
			'Size':{	'infoLabel': 'ListItem.Size',	'description': 'Shows the file size of the currently selected song or movie in a list or thumb control'	},
			'Rating':{	'infoLabel': 'ListItem.Rating',	'description': 'Shows the IMDB rating of the currently selected movie in a list or thumb control'	},
			'RatingAndVotes':{	'infoLabel': 'ListItem.RatingAndVotes',	'description': 'Shows the IMDB rating and votes of the currently selected movie in a list or thumb control'	},
			'Mpaa':{	'infoLabel': 'ListItem.Mpaa',	'description': 'Show the MPAA rating of the currently selected movie in a list or thumb control'	},
			'ProgramCount':{	'infoLabel': 'ListItem.ProgramCount',	'description': 'Shows the number of times an xbe has been run from "my programs"'	},
			'Duration':{	'infoLabel': 'ListItem.Duration',	'description': 'Shows the song or movie duration of the currently selected movie in a list or thumb control'	},
			'DBID':{	'infoLabel': 'ListItem.DBID',	'description': 'Shows the database id of the currently selected listitem in a list or thumb control'	},
			'Cast':{	'infoLabel': 'ListItem.Cast',	'description': 'Shows a concatenated string of cast members of the currently selected movie, for use in dialogvideoinfo.xml'	},
			'CastAndRole':{	'infoLabel': 'ListItem.CastAndRole',	'description': 'Shows a concatenated string of cast members and roles of the currently selected movie, for use in dialogvideoinfo.xml'	},
			'Studio':{	'infoLabel': 'ListItem.Studio',	'description': 'Studio of current selected Music Video in a list or thumb control'	},
			'Trailer':{	'infoLabel': 'ListItem.Trailer',	'description': 'Shows the full trailer path with filename of the currently selected movie in a list or thumb control'	},
			'Writer':{	'infoLabel': 'ListItem.Writer',	'description': 'Name of Writer of current Video in a list or thumb control'	},
			'Tagline':{	'infoLabel': 'ListItem.Tagline',	'description': 'Small Summary of current Video in a list or thumb control'	},
			'PlotOutline':{	'infoLabel': 'ListItem.PlotOutline',	'description': 'Small Summary of current Video in a list or thumb control'	},
			'Plot':{	'infoLabel': 'ListItem.Plot',	'description': 'Complete Text Summary of Video in a list or thumb control'	},
			'PercentPlayed':{	'infoLabel': 'ListItem.PercentPlayed',	'description': 'Returns percentage value [0-100] of how far the selected video has been played'	},
			'LastPlayed':{	'infoLabel': 'ListItem.LastPlayed',	'description': 'Last play date of Video in a list or thumb control'	},
			'PlayCount':{	'infoLabel': 'ListItem.PlayCount',	'description': 'Playcount of Video in a list or thumb control'	},
			'StartTime':{	'infoLabel': 'ListItem.StartTime',	'description': 'Start time of current selected TV programme in a list or thumb control'	},
			'EndTime':{	'infoLabel': 'ListItem.EndTime',	'description': 'End time of current selected TV programme in a list or thumb control'	},
			'StartDate':{	'infoLabel': 'ListItem.StartDate',	'description': 'Start date of current selected TV programme in a list or thumb control'	},
			'Date':{	'infoLabel': 'ListItem.Date',	'description': 'Day, start time and end time of current selected TV programme in a list or thumb control'	},
			'ChannelNumber':{	'infoLabel': 'ListItem.ChannelNumber',	'description': 'Number of current selected TV channel in a list or thumb control'	},
			'ChannelName':{	'infoLabel': 'ListItem.ChannelName',	'description': 'Name of current selected TV channel in a list or thumb control'	},
			'VideoCodec':{	'infoLabel': 'ListItem.VideoCodec',	'description': 'Shows the video codec of the currently selected video (common values: 3iv2, avc1, div2, div3, divx, divx 4, dx50, flv, h264, microsoft, mp42, mp43, mp4v, mpeg1video, mpeg2video, mpg4, rv40, svq1, svq3, theora, vp6f, wmv2, wmv3, wvc1, xvid)'	},
			'VideoResolution':{	'infoLabel': 'ListItem.VideoResolution',	'description': 'Shows the resolution of the currently selected video (possible values: 480, 576, 540, 720, 1080). Note that 540 usually means a widescreen format (around 960x540) while 576 means PAL resolutions (normally 720x576), therefore 540 is actually better resolution than 576.'	},
			'VideoAspect':{	'infoLabel': 'ListItem.VideoAspect',	'description': 'Shows the aspect ratio of the currently selected video (possible values: 1.33, 1.66, 1.78, 1.85, 2.20, 2.35)'	},
			'AudioCodec':{	'infoLabel': 'ListItem.AudioCodec',	'description': 'Shows the audio codec of the currently selected video (common values: aac, ac3, cook, dca, dtshd_hra, dtshd_ma, eac3, mp1, mp2, mp3, pcm_s16be, pcm_s16le, pcm_u8, vorbis, wmapro, wmav2)'	},
			'AudioChannels':{	'infoLabel': 'ListItem.AudioChannels',	'description': 'Shows the number of audio channels of the currently selected video (possible values: 0, 1, 2, 4, 5, 6, 8)'	},
			'AudioLanguage':{	'infoLabel': 'ListItem.AudioLanguage',	'description': 'Shows the audio language of the currently selected video (returns an ISO 639-2 three character code, e.g. eng, epo, deu)'	},
			'SubtitleLanguage':{	'infoLabel': 'ListItem.SubtitleLanguage',	'description': 'Shows the subtitle language of the currently selected video (returns an ISO 639-2 three character code, e.g. eng, epo, deu)'	}
		},
		'MusicPlayer': {
			'Title':{	'infoLabel': 'MusicPlayer.Title',	'description': 'Title of the currently playing song, also available are "MusicPlayer.offset(number).Title" offset is relative to the current playing item and "MusicPlayer.Position(number).Title" position is relative to the start of the playlist'	},
			'Album':{	'infoLabel': 'MusicPlayer.Album',	'description': 'Album from which the current song is from, also available are "MusicPlayer.offset(number).Album" offset is relative to the current playing item and "MusicPlayer.Position(number).Album" position is relative to the start of the playlist'	},
			'Property(Album_Mood)':{	'infoLabel': 'MusicPlayer.Property(Album_Mood)',	'description': 'Shows the moods of the currently playing Album'	},
			'Property(Album_Style)':{	'infoLabel': 'MusicPlayer.Property(Album_Style)',	'description': 'Shows the styles of the currently playing Album'	},
			'Property(Album_Theme)':{	'infoLabel': 'MusicPlayer.Property(Album_Theme)',	'description': 'Shows the themes of the currently playing Album'	},
			'Property(Album_Type)':{	'infoLabel': 'MusicPlayer.Property(Album_Type)',	'description': 'Shows the Album Type (e.g. compilation, enhanced, explicit lyrics) of the currently playing Album'	},
			'Property(Album_Label)':{	'infoLabel': 'MusicPlayer.Property(Album_Label)',	'description': 'Shows the record label of the currently playing Album'	},
			'Property(Album_Description)':{	'infoLabel': 'MusicPlayer.Property(Album_Description)',	'description': 'Shows a review of the currently playing Album'	},
			'Artist':{	'infoLabel': 'MusicPlayer.Artist',	'description': 'Artist(s) of current song, also available are "MusicPlayer.offset(number).Artist" offset is relative to the current playing item and "MusicPlayer.Position(number).Artist" position is relative to the start of the playlist'	},
			'Property(Artist_Born)':{	'infoLabel': 'MusicPlayer.Property(Artist_Born)',	'description': 'Date of Birth of the currently playing Artist'	},
			'Property(Artist_Died)':{	'infoLabel': 'MusicPlayer.Property(Artist_Died)',	'description': 'Date of Death of the currently playing Artist'	},
			'Property(Artist_Formed)':{	'infoLabel': 'MusicPlayer.Property(Artist_Formed)',	'description': 'Formation date of the currently playing Artist/Band'	},
			'Property(Artist_Disbanded)':{	'infoLabel': 'MusicPlayer.Property(Artist_Disbanded)',	'description': 'Disbanding date of the currently playing Artist/Band'	},
			'Property(Artist_YearsActive)':{	'infoLabel': 'MusicPlayer.Property(Artist_YearsActive)',	'description': 'Years the currently Playing artist has been active'	},
			'Property(Artist_Instrument)':{	'infoLabel': 'MusicPlayer.Property(Artist_Instrument)',	'description': 'Instruments played by the currently playing artist'	},
			'Property(Artist_Description)':{	'infoLabel': 'MusicPlayer.Property(Artist_Description)',	'description': 'Shows a biography of the currently playing artist'	},
			'Property(Artist_Mood)':{	'infoLabel': 'MusicPlayer.Property(Artist_Mood)',	'description': 'Shows the moods of the currently playing artist'	},
			'Property(Artist_Style)':{	'infoLabel': 'MusicPlayer.Property(Artist_Style)',	'description': 'Shows the styles of the currently playing artist'	},
			'Property(Artist_Genre)':{	'infoLabel': 'MusicPlayer.Property(Artist_Genre)',	'description': 'Shows the genre of the currently playing artist'	},
			'Genre':{	'infoLabel': 'MusicPlayer.Genre',	'description': 'Genre(s) of current song, also available are "MusicPlayer.offset(number).Genre" offset is relative to the current playing item and "MusicPlayer.Position(number).Genre" position is relative to the start of the playlist'	},
			'Lyrics':{	'infoLabel': 'MusicPlayer.Lyrics',	'description': 'Lyrics of current song stored in ID tag info'	},
			'Year':{	'infoLabel': 'MusicPlayer.Year',	'description': 'Year of release of current song, also available are "MusicPlayer.offset(number).Year" offset is relative to the current playing item and "MusicPlayer.Position(number).Year" position is relative to the start of the playlist'	},
			'Rating':{	'infoLabel': 'MusicPlayer.Rating',	'description': 'Numeric Rating of current song, also available are "MusicPlayer.offset(number).Rating" offset is relative to the current playing item and "MusicPlayer.Position(number).Rating" position is relative to the start of the playlist'	},
			'DiscNumber':{	'infoLabel': 'MusicPlayer.DiscNumber',	'description': 'Disc Number of current song stored in ID tag info, also available are "MusicPlayer.offset(number).DiscNumber" offset is relative to the current playing item and "MusicPlayer.Position(number).DiscNumber" position is relative to the start of the playlist'	},
			'Comment':{	'infoLabel': 'MusicPlayer.Comment',	'description': 'Comment of current song stored in ID tag info, also available are "MusicPlayer.offset(number).Comment" offset is relative to the current playing item and "MusicPlayer.Position(number).Comment" position is relative to the start of the playlist'	},
			'Time':{	'infoLabel': 'MusicPlayer.Time',	'description': 'Current time in song'	},
			'TimeRemaining':{	'infoLabel': 'MusicPlayer.TimeRemaining',	'description': 'Current remaining time in song'	},
			'TimeSpeed':{	'infoLabel': 'MusicPlayer.TimeSpeed',	'description': 'Both the time and the playspeed formatted up. eg 1:23 (2x)'	},
			'TrackNumber':{	'infoLabel': 'MusicPlayer.TrackNumber',	'description': 'Track number of current song, also available are "MusicPlayer.offset(number).TrackNumber" offset is relative to the current playing item and "MusicPlayer.Position(number).TrackNumber" position is relative to the start of the playlist'	},
			'Duration':{	'infoLabel': 'MusicPlayer.Duration',	'description': 'Duration of current song, also available are "MusicPlayer.offset(number).Duration" offset is relative to the current playing item and "MusicPlayer.Position(number).Duration" position is relative to the start of the playlist'	},
			'BitRate':{	'infoLabel': 'MusicPlayer.BitRate',	'description': 'Bitrate of current song'	},
			'Channels':{	'infoLabel': 'MusicPlayer.Channels',	'description': 'Number of channels of current song'	},
			'BitsPerSample':{	'infoLabel': 'MusicPlayer.BitsPerSample',	'description': 'Number of bits per sample of current song'	},
			'SampleRate':{	'infoLabel': 'MusicPlayer.SampleRate',	'description': 'Samplerate of current song'	},
			'Codec':{	'infoLabel': 'MusicPlayer.Codec',	'description': 'Codec of current song'	},
			'PlaylistPosition':{	'infoLabel': 'MusicPlayer.PlaylistPosition',	'description': 'Position of the current song in the current music playlist'	},
			'PlaylistLength':{	'infoLabel': 'MusicPlayer.PlaylistLength',	'description': 'Total size of the current music playlist'	}
		},
		'MusicPartyMode': {	
			'SongsPlayed':{	'infoLabel': 'MusicPartyMode.SongsPlayed',	'description': 'Number of songs played during Party Mode'	},
			'MatchingSongs':{	'infoLabel': 'MusicPartyMode.MatchingSongs',	'description': 'Number of songs available to Party Mode'	},
			'MatchingSongsPicked':{	'infoLabel': 'MusicPartyMode.MatchingSongsPicked',	'description': 'Number of songs picked already for Party Mode'	},
			'MatchingSongsLeft':{	'infoLabel': 'MusicPartyMode.MatchingSongsLeft',	'description': 'Number of songs left to be picked from for Party Mode'	},
			'RelaxedSongsPicked':{	'infoLabel': 'MusicPartyMode.RelaxedSongsPicked',	'description': 'Not currently used'	},
			'RandomSongsPicked':{	'infoLabel': 'MusicPartyMode.RandomSongsPicked',	'description': 'Number of unique random songs picked during Party Mode'	}
		},*/
		'Network': {
			'IPAddress':{	'infoLabel': 'Network.IPAddress',	'description': 'The systems IP Address (formatted as IP: <ipaddress>)'	},
			'MacAddress':{	'infoLabel': 'Network.MacAddress',	'description': 'The systems mac address'	},
			'IsDHCP':{	'infoLabel': 'Network.IsDHCP',	'description': 'Network type is DHCP or FIXED'	},
			'LinkState':{	'infoLabel': 'Network.LinkState',	'description': 'Network linkstate e.g. 10mbit/100mbit etc.'	},
			'SubnetAddress':{	'infoLabel': 'Network.SubnetAddress',	'description': 'Network subnet address'	},
			'GatewayAddress':{	'infoLabel': 'Network.GatewayAddress',	'description': 'Network gateway address'	},
			'DHCPAddress':{	'infoLabel': 'Network.DHCPAddress',	'description': 'DHCP ip address'	},
			'DNS1Address':{	'infoLabel': 'Network.DNS1Address',	'description': 'Network dns 1 address'	},
			'DNS2Address':{	'infoLabel': 'Network.DNS2Address',	'description': 'Network dns 2 address'	}
		},
		'Player': {
			'FinishTime':{	'infoLabel': 'Player.FinishTime',	'description': 'Time playing media will end'	},
			'Chapter':{	'infoLabel': 'Player.Chapter',	'description': 'Current chapter of current playing media'	},
			'ChapterCount':{	'infoLabel': 'Player.ChapterCount',	'description': 'Total number of chapters of current playing media'	},
			'Time':{	'infoLabel': 'Player.Time',	'description': 'Elapsed time of current playing media'	},
			'TimeRemaining':{	'infoLabel': 'Player.TimeRemaining',	'description': 'Remaining time of current playing media'	},
			'Duration':{	'infoLabel': 'Player.Duration',	'description': 'Total duration of the current playing media'	},
			'SeekTime':{	'infoLabel': 'Player.SeekTime',	'description': 'Time to which the user is seeking'	},
			'SeekOffset':{	'infoLabel': 'Player.SeekOffset',	'description': 'Indicates the seek offset after a seek press (eg user presses BigStepForward, player.seekoffset returns +10:00)'	},
			'Volume':{	'infoLabel': 'Player.Volume',	'description': 'Current volume (between -60 and 0dB)'	},
			'CacheLevel':{	'infoLabel': 'Player.CacheLevel',	'description': 'Players current cache fill percentage (if supported by the player)'	},
			'ProgressCache':{	'infoLabel': 'Player.ProgressCache',	'description': 'Shows how much of the file is cached above current play percentage'	},
			'File':{	'infoLabel': 'Player.Filenameandpath',	'description': 'Shows the full path with filename of the currently playing song or movie'	}
		},
		'Playlist': {
			'Position':{	'infoLabel': 'Playlist.Position',	'description': 'Position of the current item in the current playlist (video or music)'	},
			'Length':{	'infoLabel': 'Playlist.Length',	'description': 'Total size of the current playlist (video or music)'	},
			'Random':{	'infoLabel': 'Playlist.Random',	'description': 'Returns string IDs 590 (Randomize Play Enabled) or 591 (Disabled)'	},
			'Repeat':{	'infoLabel': 'Playlist.Repeat',	'description': 'Returns string IDs 592 (Repeat One), 593 (Repeat All), or 594 (Repeat Off)'	}
		},
		/*'PVR': {
			'NextRecordingTitle':{	'infoLabel': 'PVR.NextRecordingTitle',	'description': 'Title of first TV programme scheduled to be recorded in a list or thumb control'	},
			'NextRecordingChannel':{	'infoLabel': 'PVR.NextRecordingChannel',	'description': 'Channel name of first TV programme scheduled to be recorded in a list or thumb control'	},
			'NextRecordingDateTime':{	'infoLabel': 'PVR.NextRecordingDateTime',	'description': 'Date and time of first TV programme scheduled to be recorded in a list or thumb control'	}
		},*/
		'Skin':	{
			'CurrentTheme':{	'infoLabel': 'Skin.CurrentTheme',	'description': 'Returns the current selected skin theme.'	}
		},
		'System': {
			'Time':{	'infoLabel': 'System.Time',	'description': 'Current time'	},
			'Date':{	'infoLabel': 'System.Date',	'description': 'Current date'	},
			//'AlarmPos':{	'infoLabel': 'System.AlarmPos',	'description': 'Shutdown Timer position'	},
			//'BatteryLevel':{	'infoLabel': 'System.BatteryLevel',	'description': 'Returns the remaining battery level in range 0-100'	},
			//'FreeSpace':{	'infoLabel': 'System.FreeSpace',	'description': 'Total Freespace on the drive'	},
			//'UsedSpace':{	'infoLabel': 'System.UsedSpace',	'description': 'Total Usedspace on the drive'	},
			//'TotalSpace':{	'infoLabel': 'System.TotalSpace',	'description': 'Totalspace on the drive'	},
			//'UsedSpacePercent':{	'infoLabel': 'System.UsedSpacePercent',	'description': 'Total Usedspace Percent on the drive'	},
			//'FreeSpacePercent':{	'infoLabel': 'System.FreeSpacePercent',	'description': 'Total Freespace Percent on the drive'	},
			//'CPUTemperature':{	'infoLabel': 'System.CPUTemperature',	'description': 'Current CPU temperature'	},
			//'GPUTemperature':{	'infoLabel': 'System.GPUTemperature',	'description': 'Current GPU temperature'	},
			//'FanSpeed':{	'infoLabel': 'System.FanSpeed',	'description': 'Current fan speed'	},
			//'BuildVersion':{	'infoLabel': 'System.BuildVersion',	'description': 'Version of build'	},
			//'BuildDate':{	'infoLabel': 'System.BuildDate',	'description': 'Date of build'	},
			//'FriendlyName':{	'infoLabel': 'System.FriendlyName',	'description': 'Returns the xbmc instance name. It will auto append (%hostname%) in case the device name was not changed. eg. "XBMC (htpc)"'	},
			//'FPS':{	'infoLabel': 'System.FPS',	'description': 'Current rendering speed (frames per second)'	},
			//'FreeMemory':{	'infoLabel': 'System.FreeMemory',	'description': 'Amount of free memory in Mb'	},
			//'ScreenMode':{	'infoLabel': 'System.ScreenMode',	'description': 'Screenmode (eg windowed / fullscreen)'	},
			//'ScreenWidth':{	'infoLabel': 'System.ScreenWidth',	'description': 'Width of screen in pixels'	},
			//'ScreenHeight':{	'infoLabel': 'System.ScreenHeight',	'description': 'Height of screen in pixels'	},
			//'CurrentWindow':{	'infoLabel': 'System.CurrentWindow',	'description': 'Current Window we are in'	},
			//'CurrentControl':{	'infoLabel': 'System.CurrentControl',	'description': 'Current focused control'	},
			//'DVDLabel':{	'infoLabel': 'System.DVDLabel',	'description': 'Label of the disk in the DVD-ROM drive'	},
			//'HddTemperature':{	'infoLabel': 'System.HddTemperature',	'description': 'Hdd temperature'	},
			//'KernelVersion':{	'infoLabel': 'System.KernelVersion',	'description': 'System kernel version'	},
			//'Uptime':{	'infoLabel': 'System.Uptime',	'description': 'System current uptime'	},
			//'TotalUptime':{	'infoLabel': 'System.TotalUptime',	'description': 'System total uptime'	},
			//'CpuFrequency':{	'infoLabel': 'System.CpuFrequency',	'description': 'System cpu frequency'	},
			//'ScreenResolution':{	'infoLabel': 'System.ScreenResolution',	'description': 'Screen resolution'	},
			//'VideoEncoderInfo':{	'infoLabel': 'System.VideoEncoderInfo',	'description': 'Video encoder info'	},
			//'InternetState':{	'infoLabel': 'System.InternetState',	'description': 'Will return the internet state, connected or not connected and for Conditional use: Connected->TRUE, not Connected->FALSE, do not use to check status in a pythonscript since it is threaded.'	},
			//'Language':{	'infoLabel': 'System.Language',	'description': 'Shows the current language'	},
			//'ProfileName':{	'infoLabel': 'System.ProfileName',	'description': 'Shows the User name of the currently logged in XBMC user'	},
			//'ProfileCount':{	'infoLabel': 'System.ProfileCount',	'description': 'Shows the number of defined profiles'	},
			//'TemperatureUnits':{	'infoLabel': 'System.TemperatureUnits',	'description': 'Shows Celsius or Fahrenheit symbol'	}
		},
		'Visualisation': {
			//'Preset':{	'infoLabel': 'Visualisation.Preset',	'description': 'Shows the current preset of the visualisation'	},
			//'Name':{	'infoLabel': 'Visualisation.Name',	'description': 'Shows the name of the visualisation'	}
		},
		/*'VideoPlayer':	{
			'Time':{	'infoLabel': 'VideoPlayer.Time',	'description': 'Current time in movie'	},
			'TimeRemaining':{	'infoLabel': 'VideoPlayer.TimeRemaining',	'description': 'Current remaining time in movie'	},
			'TimeSpeed':{	'infoLabel': 'VideoPlayer.TimeSpeed',	'description': 'Current time + playspeed. eg 1:23:14 (-4x)'	},
			'Duration':{	'infoLabel': 'VideoPlayer.Duration',	'description': 'Length of current movie'	},
			'Title':{	'infoLabel': 'VideoPlayer.Title',	'description': 'Title of currently playing video. If its in the database it will return the database title, else the filename'	},
			'TVShowTitle':{	'infoLabel': 'VideoPlayer.TVShowTitle',	'description': 'Title of currently playing episodes tvshow name'	},
			'Season':{	'infoLabel': 'VideoPlayer.Season',	'description': 'Season number of the currently playing episode'	},
			'Episode':{	'infoLabel': 'VideoPlayer.Episode',	'description': 'Episode number of the currently playing episode'	},
			'Genre':{	'infoLabel': 'VideoPlayer.Genre',	'description': 'Genre(s) of current movie, if its in the database'	},
			'Director':{	'infoLabel': 'VideoPlayer.Director',	'description': 'Director of current movie, if its in the database'	},
			'Country':{	'infoLabel': 'VideoPlayer.Country',	'description': 'Production country of current movie, if its in the database'	},
			'Year':{	'infoLabel': 'VideoPlayer.Year',	'description': 'Year of release of current movie, if its in the database'	},
			'Rating':{	'infoLabel': 'VideoPlayer.Rating',	'description': 'IMDb user rating of current movie, if its in the database'	},
			'RatingAndVotes':{	'infoLabel': 'VideoPlayer.RatingAndVotes',	'description': 'IMDb user rating and votes of current movie, if its in the database'	},
			'mpaa':{	'infoLabel': 'VideoPlayer.mpaa',	'description': 'MPAA rating of current movie, if its in the database'	},
			'PlaylistPosition':{	'infoLabel': 'VideoPlayer.PlaylistPosition',	'description': 'Position of the current song in the current video playlist'	},
			'PlaylistLength':{	'infoLabel': 'VideoPlayer.PlaylistLength',	'description': 'Total size of the current video playlist'	},
			'Cast':{	'infoLabel': 'VideoPlayer.Cast',	'description': 'A concatenated string of cast members of the current movie, if its in the database'	},
			'CastAndRole':{	'infoLabel': 'VideoPlayer.CastAndRole',	'description': 'A concatenated string of cast members and roles of the current movie, if its in the database'	},
			'Album':{	'infoLabel': 'VideoPlayer.Album',	'description': 'Album from which the current Music Video is from, if its in the database'	},
			'Artist':{	'infoLabel': 'VideoPlayer.Artist',	'description': 'Artist(s) of current Music Video, if its in the database'	},
			'Studio':{	'infoLabel': 'VideoPlayer.Studio',	'description': 'Studio of current Music Video, if its in the database'	},
			'Writer':{	'infoLabel': 'VideoPlayer.Writer',	'description': 'Name of Writer of current playing Video, if its in the database'	},
			'Tagline':{	'infoLabel': 'VideoPlayer.Tagline',	'description': 'Small Summary of current playing Video, if its in the database'	},
			'PlotOutline':{	'infoLabel': 'VideoPlayer.PlotOutline',	'description': 'Small Summary of current playing Video, if its in the database'	},
			'Plot':{	'infoLabel': 'VideoPlayer.Plot',	'description': 'Complete Text Summary of current playing Video, if its in the database'	},
			'LastPlayed':{	'infoLabel': 'VideoPlayer.LastPlayed',	'description': 'Last play date of current playing Video, if its in the database'	},
			'PlayCount':{	'infoLabel': 'VideoPlayer.PlayCount',	'description': 'Playcount of current playing Video, if its in the database'	},
			'VideoCodec':{	'infoLabel': 'VideoPlayer.VideoCodec',	'description': 'Shows the video codec of the currently playing video (common values: see ListItem.VideoCodec)'	},
			'VideoResolution':{	'infoLabel': 'VideoPlayer.VideoResolution',	'description': 'Shows the video resolution of the currently playing video (possible values: see ListItem.VideoResolution)'	},
			'VideoAspect':{	'infoLabel': 'VideoPlayer.VideoAspect',	'description': 'Shows the aspect ratio of the currently playing video (possible values: see ListItem.VideoAspect)'	},
			'AudioCodec':{	'infoLabel': 'VideoPlayer.AudioCodec',	'description': 'Shows the audio codec of the currently playing video (common values: see ListItem.AudioCodec)'	},
			'AudioChannels':{	'infoLabel': 'VideoPlayer.AudioChannels',	'description': 'Shows the number of audio channels of the currently playing video (possible values: see ListItem.AudioChannels)'	}
		}*/
        },
        getInfoLabels = function () {
        	var params = { 'labels': [] };
        	var getLabels = function (labels) {
			$.each(labels, function (name, label) {
				if (typeof label.infoLabel === 'string') params.labels.push(label.infoLabel);
				else if (label instanceof Object) getLabels(label);
			});
		}
		getLabels(infoLabels);
		var setLabels = function (labels, newLabels) {
			$.each(labels, function (name, label) {
				if (label instanceof Object) {
					if (typeof label.infoLabel === 'string') {
						if (newLabels[label.infoLabel] !== undefined) {
							labels[name] = newLabels[label.infoLabel];
						}
					}
					else labels[name] = setLabels(label, newLabels);
				}
			});
			return labels;
		};
		server.sendMessage( 'XBMC.GetInfoLabels', params,
			function (data) {
				$.extend(state, setLabels(infoLabels, data.result));
				renderState();
			}
		);
        },
	getState = function () {
		server.sendMessage( 'Application.GetProperties',
		    {
			properties: [ 'volume', 'muted', 'name', 'version' ]
		    },
		    function (data) {
		    	$.extend(state.Application, data.result);
			renderState();
		    }
		);
		server.sendMessage( 'GUI.GetProperties',
		    {
			properties: [ 'currentwindow', 'currentcontrol', 'skin', 'fullscreen' ]
		    },
		    function (data) {
		    	$.extend(state.GUI, data.result);
			renderState();
		    }
		);
		server.sendMessage('JSONRPC.Permission', function (data) {
			state.JSONRPC.Permissions = data.result
			renderState();
		});
		server.sendMessage('JSONRPC.Version', function (data) {
			if (data.result && data.result.version !== undefined) state.JSONRPC.Version = data.result.version;
			renderState();
		});
		getInfoLabels();
	},
	connect = function (address) {
		var URL = parseURL('/', { 'pathname': 'jsonrpc', 'protocol': 'ws', 'port': 9090 });
		window.server = JSONRPC(URL, true);
		getState();
		server.onNotification(function (data) {
			renderState();
		});
		server.onNotification('GUI.OnScreensaverDeactivated', function (data) {
			state.GUI.Screensaver = false;
		});
		server.onNotification('GUI.OnScreensaverActivated', function (data) {
			state.GUI.Screensaver = true;
		});
		server.onNotification('Player.OnPlay', function (data) {
			if (data.data.player instanceof Object) {
				if (data.data.item instanceof Object) {
					data.data.item.state = 'playing';
					$.extend(data.data.player, data.data.item);
				}
				state.Player = data.data.player;
			}
		});
		server.onNotification('Player.OnPause', function (data) {
			if (data.data.player instanceof Object) {
				if (data.data.item instanceof Object) {
					data.data.item.state = 'paused';
					$.extend(data.data.player, data.data.item);
				}
				state.Player = data.data.player;
			}
		});
		server.onNotification('Player.OnStop', function (data) {
			if (state.player !== undefined) {
				state.Player = { };
			}
		});
		server.onNotification('Player.OnSeek', function (data) {
			if (data.data.player instanceof Object) {
				if (data.data.item instanceof Object) {
					data.data.item.state = 'paused';
					$.extend(data.data.player, data.data.item);
				}
				state.Player = data.data.player;
			}
		});
		server.onNotification('Player.OnSpeedChanged', function (data) {
			if (data.data.player instanceof Object) {
				if (data.data.item instanceof Object) {
					data.data.item.state = 'paused';
					$.extend(data.data.player, data.data.item);
				}
				state.Player = data.data.player;
			}
		});
		server.onNotification('Application.OnVolumeChanged', function (data) {
			$.extend(state.Application, data.data);
		});
	};

	$(function () { //when the page has finished loading
		connect(); //try to connect
	});

})(window, jQuery, undefined);


</script>
